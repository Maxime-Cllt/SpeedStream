# SpeedStream API Configuration Template
# Copy this file to .env and customize the values for your environment

# ============================================================================
# API Configuration
# ============================================================================

# CORS - Comma-separated list of allowed origins
# Development:
# ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173
# Production (MODIFIER AVEC VOS VRAIS DOMAINES):
ALLOWED_ORIGINS=https://api.example.com,https://dashboard.example.com

# ============================================================================
# Database Configuration
# ============================================================================

# PostgreSQL connection (secrets are read from /run/secrets/ in production)
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=speedstream_db
POSTGRES_USER=speedstream
POSTGRES_PASSWORD=speedstream123

# For local development without Docker secrets:
# POSTGRES_USER=speedstream
# POSTGRES_PASSWORD=speedstream123

# ============================================================================
# Redis Configuration
# ============================================================================

REDIS_HOST=redis
REDIS_PORT=6379
# IMPORTANT: Change this to a strong password in production!
REDIS_PASSWORD=your_secure_redis_password_here
REDIS_MAX_MEMORY=256mb

# ============================================================================
# Server Configuration
# ============================================================================

SERVER_HOST=0.0.0.0
SERVER_PORT=8080

# ============================================================================
# Logging Configuration
# ============================================================================

# Log levels: trace, debug, info, warn, error
# Production recommended: speedstream=info,tower_http=info,sqlx=warn
# Development: speedstream=debug,tower_http=debug
RUST_LOG=speedstream=info,tower_http=info,sqlx=warn

# ============================================================================
# Connection Pool Configuration
# ============================================================================

DB_MAX_CONNECTIONS=20
DB_MIN_CONNECTIONS=5

# ============================================================================
# Docker Configuration (pour build/push)
# ============================================================================

DOCKER_LOGIN_USERNAME=maxcllt
IMAGE_NAME=speedstream-api

# ============================================================================
# Docker Compose - Images et Versions
# ============================================================================

API_IMAGE=maxcllt/speedstream-api
API_VERSION=1.1.0
RACEBOARD_IMAGE=maxcllt/race-board
RACEBOARD_VERSION=latest

# ============================================================================
# Docker Compose - Ports
# ============================================================================

# API backend port
API_PORT=8080
# Frontend port
RACEBOARD_PORT=3000
# Nginx ports
HTTP_PORT=80
HTTPS_PORT=443

# ============================================================================
# Frontend Configuration
# ============================================================================

NODE_ENV=production
NEXT_PUBLIC_APP_MODE=PROD
# URL de l'API accessible depuis le navigateur (IMPORTANT: Modifier avec votre domaine)
NEXT_PUBLIC_API_URL=https://api.example.com

# ============================================================================
# Network Configuration
# ============================================================================

NETWORK_SUBNET=172.20.0.0/16
